CC = gcc
RL-Glue = ../../RL-Glue
RL-Sockets = $(RL-Glue)/Sockets

# We need to search the RL-Glue directory for RL_Interface.h 
CFLAGS = -I$(RL-Glue) -I$(RL-Sockets) -ansi -pedantic -Wall

COMPILE_TOGETHER: Glue Agent Environment Benchmark Network
	$(CC) -o RL_main Build/RL_Interface.o Build/RLnet.o Build/ZeroAgent.o Build/mines.o Build/main.o

AGENT_SEPARATE: Glue Agent Environment Benchmark Network
	$(CC) -o RL_main Build/RL_Interface.o Build/RLnet.o Build/RLnet_agent.o Build/mines.o Build/main.o

ENV_SEPARATE: Glue Agent Environment Benchmark Network
	$(CC) -o RL_main Build/RL_Interface.o Build/RLnet.o Build/ZeroAgent.o Build/RLnet_environment.o Build/main.o	

BENCHMARK_SEPARATE: Glue Agent Environment Network
	$(CC) -o RL_main Build/RL_Interface.o Build/RLnet.o Build/ZeroAgent.o Build/mines.o Build/RLnet_glue.o 

AGENT_ENV_SEPARATE: Glue Agent Environment Benchmark Network
	$(CC) -o RL_main Build/RL_Interface.o Build/RLnet.o Build/RLnet_agent.o Build/RLnet_environment.o Build/main.o

AGENT_ENV_BENCHMARK_SEPARATE: Glue Agent Environment Benchmark Network
	$(CC) -o RL_main Build/RL_Interface.o Build/RLnet.o Build/RLnet_agent.o Build/RLnet_environment.o Build/RLnet_glue.o

Glue: RL_Interface.o RLnet_glue.o
Agent: RLnet_agent.o ZeroAgent.o
Environment: RLnet_environment.o mines.o
Benchmark: main.o RLnet_benchmark.o
Network: RLnet.o

RLnet_benchmark.o: $(RL-Glue)/Sockets/Benchmark/RLnet_benchmark.c
	$(CC) -c $(CFLAGS) $< -o Build/RLnet_benchmark.o

RLnet_glue.o: $(RL-Glue)/Sockets/Glue/RLnet_glue.c
	$(CC) -c $(CFLAGS) $< -o Build/RLnet_glue.o

RL_Interface.o: $(RL-Glue)/RL_Interface.c $(RL-Glue)/RL_Interface.h
	$(CC) -c $(CFLAGS) $< -o Build/RL_Interface.o

RLnet_agent.o: $(RL-Sockets)/Glue/RLnet_agent.c
	$(CC) -c $(CFLAGS) $< -o Build/RLnet_agent.o

RLnet_environment.o: $(RL-Sockets)/Glue/RLnet_environment.c
	$(CC) -c $(CFLAGS) $< -o Build/RLnet_environment.o

RLnet.o: $(RL-Glue)/Sockets/RLnet/RLnet.c
	$(CC) -c $(CFLAGS) $< -o Build/RLnet.o

mines.o: ./Environment/mines.c
	$(CC) -c $(CFLAGS) $< -o Build/mines.o

ZeroAgent.o: ./Agent/ZeroAgent.c
	$(CC) -c $(CFLAGS) $< -o Build/ZeroAgent.o

main.o: ./Benchmark/main.c
	$(CC) -c $(CFLAGS) $< -o Build/main.o

clean:
	rm -fr Build/*.o
	rm -fr RL_main

tidy:
	rm -fr *.*~
	rm -fr *~
	rm -fr \#*
